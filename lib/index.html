<!doctype html>
        <html>

            <head>
                <link rel="stylesheet" href="css/reset.css">
                <link rel="stylesheet" href="css/main.css">
            </head>
            <body>
            <ul class="flex-container one"></ul>
            <script src="/socket.io/socket.io.js"></script>
            <script>
                var socket = io.connect('http://localhost:1030'),
                        formatter = function(num) {
                            return(num.toFixed(2));
                        };
                socket.on('connected', function(data) {
                   var el = document.querySelector('.flex-container.one');
                    el.innerHTML = '';
                   data.forEach(function (market) {
                       colorClass = market.goingUp ? 'up' : 'down';
                       el.innerHTML +=
                               ('<li class="flex-item '+ market.id +'">' + market.name + ' <div class="back sell">' + formatter(market.sellPrice) + '</div><div class="back buy"> ' + formatter(market.buyPrice) + '</div></li>');

                   })
                });
                socket.on('onPrice', function (data) {
                    console.info('.flex-container.one .' + data.id + ' .sell');
                    var elSell = document.querySelector('.flex-container.one .' + data.id + ' .sell');
                    var elBuy = document.querySelector('.flex-container.one .' + data.id + ' .buy');

                    elSell.classList.toggle('up', data.goingUp);
                    elSell.classList.toggle('down', !data.goingUp);

                    elBuy.classList.toggle('up', data.goingUp);
                    elBuy.classList.toggle('down', !data.goingUp);

                    elBuy.classList.remove('back');
                    elSell.classList.remove('back');

                    elSell.innerHTML = formatter(data.sellPrice);
                    elBuy.innerHTML = formatter(data.buyPrice);

                    window.setTimeout(function () {
                        elBuy.classList.add('back');
                        elSell.classList.add('back');
                    }, 0);
                });
            </script>
            </body>
        </html>

